<!DOCTYPE html>
<html lang="en">
<head>
    <title>Pirate</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" 
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" 
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles/styles.css">
</head>

<body>
    <div class="container">
        <h1>Find the treasure by Sairakesh</h1>
        <div>Click on the locations to search for treasure, beware the traps</div>
        <div id="locations">Number of locations checked is zero</div>
        <div id="penalty">Penalty is zero</div>
        <div id="button-1" onclick="help()">Click for help</div>
        <div id="help">Help report</div>
        <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
            <div class="col">
                <div class="p-2"><img id="img-1-1" src="images/maps.jpg" alt="map" onclick="check(0)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-1-2" src="images/maps.jpg" alt="trap" onclick="check(1)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-1-3" src="images/maps.jpg" alt="pirate" onclick="check(2)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-1-4" src="images/maps.jpg" alt="treasure" onclick="check(3)">  </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-1-5" src="images/maps.jpg" alt="ship" onclick="check(4)"> </div>
            </div>
        </div>
        <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
            <div class="col">
                <div class="p-2"><img id="img-2-1" src="images/maps.jpg" alt="map" onclick="check(5)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-2-2" src="images/maps.jpg" alt="trap" onclick="check(6)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-2-3" src="images/maps.jpg" alt="pirate" onclick="check(7)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-2-4" src="images/maps.jpg" alt="treasure" onclick="check(8)">  </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-2-5" src="images/maps.jpg" alt="ship" onclick="check(9)"> </div>
            </div>
        </div>
        <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
            <div class="col">
                <div class="p-2"><img id="img-3-1" src="images/maps.jpg" alt="map" onclick="check(10)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-3-2" src="images/maps.jpg" alt="trap" onclick="check(11)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-3-3" src="images/maps.jpg" alt="pirate" onclick="check(12)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-3-4" src="images/maps.jpg" alt="treasure" onclick="check(13)">  </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-3-5" src="images/maps.jpg" alt="ship" onclick="check(14)"> </div>
            </div>
        </div>
        <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
            <div class="col">
                <div class="p-2"><img id="img-4-1" src="images/maps.jpg" alt="map" onclick="check(15)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-4-2" src="images/maps.jpg" alt="trap" onclick="check(16)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-4-3" src="images/maps.jpg" alt="pirate" onclick="check(17)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-4-4" src="images/maps.jpg" alt="treasure" onclick="check(18)">  </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-4-5" src="images/maps.jpg" alt="ship" onclick="check(19)"> </div>
            </div>
        </div>
        <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
            <div class="col">
                <div class="p-2"><img id="img-5-1" src="images/maps.jpg" alt="map" onclick="check(20)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-5-2" src="images/maps.jpg" alt="trap" onclick="check(21)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-5-3" src="images/maps.jpg" alt="pirate" onclick="check(22)"> </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-5-4" src="images/maps.jpg" alt="treasure" onclick="check(23)">  </div>
            </div>
            <div class="col">
                <div class="p-2"><img id="img-5-5" src="images/maps.jpg" alt="ship" onclick="check(24)"> </div>
            </div>
        </div>
        <br>
        <button type="button" id="btn-4" class="btn" onclick="newGame()">New Game</button>
    </div>

    <script>
        var myids = ["img-1-1","img-1-2","img-1-3","img-1-4","img-1-5",
                    "img-2-1","img-2-2","img-2-3","img-2-4","img-2-5",
                    "img-3-1","img-3-2","img-3-3","img-3-4","img-3-5",
                    "img-4-1","img-4-2","img-4-3","img-4-4","img-4-5",
                    "img-5-1","img-5-2","img-5-3","img-5-4","img-5-5"];
        var checkCount = 0;
        var penalty = 0;
        var lastCheck = 0;
        var treasureLocation = Math.floor(Math.random() * 25);
        var trapLocation = Math.floor(Math.random() * 25);
        var gameOver = false;
        function check(position) {
            var id = myids[position];
            var img = document.getElementById(id);

            if(gameOver == true){
                return 
            }
            else{
                if(position == treasureLocation){
                    img.src = "images/treasure.jpg";
                    gameOver == true;
                    penalty -= 3;
                    console.log("Treasure Position : "+ position);
                    console.log("Penalty Points : "+ penalty);
                    console.log("Game Over");
                    gameOver=true;
                }else if(position == trapLocation){
                    img.src = "images/trap.jpg";
                    gameOver == true;
                    penalty += 4;
                    console.log("Trap Position : "+ position);
                    console.log("Penalty Points : "+ penalty);
                    console.log("Game Over");
                    gameOver=true;
                }else{
                    img.src = "images/pirate.jpg";
                    checkCount += 1;
                    penalty += 1;
                    console.log("Check count is : "+ checkCount);
                    console.log("Penalty Points : "+ penalty);
                }
                lastCheck = position;
                console.log("last check position is : "+ lastCheck);
                document.getElementById("locations").innerHTML="Number of locations checked :"+ checkCount;
                document.getElementById("penalty").innerHTML="Total Penalty points :"+ penalty;
            }
        }

        function help(){
            let rowtreasure=Math.floor(treasureLocation/5);            
            let columntreasure=treasureLocation%5;
            let lastRow=Math.floor(lastCheck/5);
            let lastColumn=lastCheck%5;
            let rowDifference=Math.abs(rowtreasure-lastRow);
            let columnDifference=Math.abs(columntreasure-lastColumn);
            let diff = Math.abs(rowDifference-columnDifference);
            console.log(rowtreasure,columntreasure,lastRow,lastColumn);
            penalty=penalty+2;
            document.getElementById("penalty").innerHTML="Total Penalty Points :"+ penalty;
            let myhelp = document.getElementById("help");
            if((rowDifference == 0 || columnDifference == 0) && diff  == 1 ) {
                myhelp.innerHTML = "Can smell it";
            } else if (rowDifference + columnDifference == 2) {
                myhelp.innerHTML = "Close Matie";
            } else{
                myhelp.innerHTML = "Step Faster";
            }       
        }

        function newGame(){
            location.reload();
        }
    </script>
</body>
</html>